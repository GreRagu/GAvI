<!DOCTYPE article PUBLIC "-//NLM//DTD Journal Archiving and Interchange DTD v2.3 20070202//EN" "archivearticle.dtd"><article xmlns:xlink="http://www.w3.org/1999/xlink" article-type="product-review"><?properties open_access?><front><journal-meta><journal-id journal-id-type="nlm-ta">BMC Musculoskelet Disord</journal-id><journal-title>BMC Musculoskeletal Disorders</journal-title><issn pub-type="epub">1471-2474</issn><publisher><publisher-name>BioMed Central</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="pmid">19149874</article-id><article-id pub-id-type="pmc">2636752</article-id><article-id pub-id-type="publisher-id">1471-2474-10-8</article-id><article-id pub-id-type="doi">10.1186/1471-2474-10-8</article-id><article-categories><subj-group subj-group-type="heading"><subject>Software</subject></subj-group></article-categories><title-group><article-title>THR Simulator &#x02013; the software for generating radiographs of THR prosthesis</article-title></title-group><contrib-group><contrib id="A1" contrib-type="author"><name><surname>Wu</surname><given-names>Tai-Yin</given-names></name><xref ref-type="aff" rid="I1">1</xref><email>dienewu@yahoo.com.tw</email></contrib><contrib id="A2" contrib-type="author"><name><surname>Yang</surname><given-names>Rong-Sen</given-names></name><xref ref-type="aff" rid="I2">2</xref><email>rsyang@ntuh.gov.tw</email></contrib><contrib id="A3" contrib-type="author"><name><surname>Fuh</surname><given-names>Chiou-Shann</given-names></name><xref ref-type="aff" rid="I3">3</xref><email>fuh@csie.ntu.edu.tw</email></contrib><contrib id="A4" contrib-type="author"><name><surname>Hou</surname><given-names>Sheng-Mou</given-names></name><xref ref-type="aff" rid="I2">2</xref><email>shengmou@ntuh.gov.tw</email></contrib><contrib id="A5" corresp="yes" contrib-type="author"><name><surname>Liaw</surname><given-names>Chen-Kun</given-names></name><xref ref-type="aff" rid="I2">2</xref><xref ref-type="aff" rid="I4">4</xref><xref ref-type="aff" rid="I5">5</xref><xref ref-type="aff" rid="I6">6</xref><email>d92008@csie.ntu.edu.tw</email></contrib></contrib-group><aff id="I1"><label>1</label>Taipei City Hospital, Renai Branch, Tapei City, Taiwan</aff><aff id="I2"><label>2</label>Department of Orthopaedics, College of Medicine, National Taiwan University &#x00026; Hospital, Tapei City, Taiwan</aff><aff id="I3"><label>3</label>Institute of Computer Science and Information Engineering, National Taiwan University, Tapei City, Taiwan</aff><aff id="I4"><label>4</label>Department of Orthopaedics, Tao-Yuan General Hospital, Tao-Yuan, Taiwan</aff><aff id="I5"><label>5</label>Minghsin University of Science and Technology,  Hsinchu County, Taiwan</aff><aff id="I6"><label>6</label>Ming Chuan University, Tapei City, Taiwan</aff><pub-date pub-type="collection"><year>2009</year></pub-date><pub-date pub-type="epub"><day>16</day><month>1</month><year>2009</year></pub-date><volume>10</volume><fpage>8</fpage><lpage>8</lpage><ext-link ext-link-type="uri" xlink:href="http://www.biomedcentral.com/1471-2474/10/8"/><history><date date-type="received"><day>24</day><month>3</month><year>2008</year></date><date date-type="accepted"><day>16</day><month>1</month><year>2009</year></date></history><permissions><copyright-statement>Copyright &#x000a9; 2009 Wu et al; licensee BioMed Central Ltd.</copyright-statement><copyright-year>2009</copyright-year><copyright-holder>Wu et al; licensee BioMed Central Ltd.</copyright-holder><license license-type="open-access" xlink:href="http://creativecommons.org/licenses/by/2.0"><p>This is an Open Access article distributed under the terms of the Creative Commons Attribution License (<ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/2.0"/>), which permits unrestricted use, distribution, and reproduction in any medium, provided the original work is properly cited.</p><!--<rdf xmlns="http://web.resource.org/cc/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:dc="http://purl.org/dc/elements/1.1" xmlns:dcterms="http://purl.org/dc/terms"><Work xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" rdf:about=""><license rdf:resource="http://creativecommons.org/licenses/by/2.0"/><dc:type rdf:resource="http://purl.org/dc/dcmitype/Text"/><dc:author>               Wu               Tai-Yin                              dienewu@yahoo.com.tw            </dc:author><dc:title>            THR Simulator &#x02013; the software for generating radiographs of THR prosthesis         </dc:title><dc:date>2009</dc:date><dcterms:bibliographicCitation>BMC Musculoskeletal Disorders 10(1): 8-. (2009)</dcterms:bibliographicCitation><dc:identifier type="sici">1471-2474(2009)10:1&#x0003c;8&#x0003e;</dc:identifier><dcterms:isPartOf>urn:ISSN:1471-2474</dcterms:isPartOf><License rdf:about="http://creativecommons.org/licenses/by/2.0"><permits rdf:resource="http://web.resource.org/cc/Reproduction" xmlns=""/><permits rdf:resource="http://web.resource.org/cc/Distribution" xmlns=""/><requires rdf:resource="http://web.resource.org/cc/Notice" xmlns=""/><requires rdf:resource="http://web.resource.org/cc/Attribution" xmlns=""/><permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" xmlns=""/></License></Work></rdf>--></license></permissions><abstract><sec><title>Background</title><p>Measuring the orientation of acetabular cup after total hip arthroplasty is important for prognosis. The verification of these measurement methods will be easier and more feasible if we can synthesize prosthesis radiographs in each simulated condition. One reported method used an expensive mechanical device with an indeterminable precision. We thus develop a program, <italic>THR Simulator</italic>, to directly synthesize digital radiographs of prostheses for further analysis.</p><p>Under Windows platform and using Borland C++ Builder programming tool, we developed the <italic>THR Simulator</italic>. We first built a mathematical model of acetabulum and femoral head. The data of the real dimension of prosthesis was adopted to generate the radiograph of hip prosthesis. Then with the ray tracing algorithm, we calculated the thickness each X-ray beam passed, and then transformed to grey scale by mapping function which was derived by fitting the exponential function from the phantom image. Finally we could generate a simulated radiograph for further analysis.</p></sec><sec><title>Results</title><p>Using <italic>THR Simulator</italic>, the users can incorporate many parameters together for radiograph synthesis. These parameters include thickness, film size, tube distance, film distance, anteversion, abduction, upper wear, medial wear, and posterior wear. These parameters are adequate for any radiographic measurement research. This <italic>THR Simulator </italic>has been used in two studies, and the errors are within 2&#x000b0; for anteversion and 0.2 mm for wearing measurement.</p></sec><sec><title>Conclusion</title><p>We design a program, <italic>THR Simulator </italic>that can synthesize prosthesis radiographs. Such a program can be applied in future studies for further analysis and validation of measurement of various parameters of pelvis after total hip arthroplasty.</p></sec></abstract></article-meta></front><body><sec><title>Background</title><p>Measuring the orientation of acetabulum cup and the wearing of insert on plain radiograph of patients who underwent total hip arthroplasty is important for prognosis[<xref ref-type="bibr" rid="B1">1</xref>]. Verifying the orientation measurement [<xref ref-type="bibr" rid="B1">1</xref>-<xref ref-type="bibr" rid="B6">6</xref>] and wearing [<xref ref-type="bibr" rid="B7">7</xref>-<xref ref-type="bibr" rid="B14">14</xref>] methods are both important, which may require a simulator to mimic every situation for such an analysis[<xref ref-type="bibr" rid="B1">1</xref>]. Mechanical simulator has once been reported in a study to measure the wearing of acetabular insert [<xref ref-type="bibr" rid="B7">7</xref>]. Although such a mechanical device is straightforward, there are disadvantages including expensive price, undetermined precision, as well as requiring image processing from radiograph to digital form. Every processing step may cause error and interfere with the final precision.</p><p>We thus developed our own <italic>THR Simulator </italic>[Figure <xref ref-type="fig" rid="F1">1</xref>] by designing a software program that can be used to generate digital radiographs directly. The early edition of <italic>THR Simulator </italic>software has been used to simulate 45 radiographs of total hip arthroplasties with 15 different anteversions ranging from 15&#x000b0;&#x02013;29&#x000b0;, and then to verify the protractor which was designed to measure the anteversion of acetabular cup [<xref ref-type="bibr" rid="B1">1</xref>]. We have corrected some mistakes and incorporated some new features in the latest edition. We hope this program can provide researchers an easy instrument to develop further measuring methods that can be applied in plain radiograph.</p><fig position="float" id="F1"><label>Figure 1</label><caption><p><bold>(A) The <italic>THR Simulator </italic>and the basic figure of the generated radiograph</bold>. (B)We adjusted the wearing parameters and the result showed that the femoral head is centrally migrated. (C)We adjusted the film size parameter to simulate a smaller film in the same picture and the result is shown. (D)We chose the anteversion type as radiographic anteversion and the result is shown.</p></caption><graphic xlink:href="1471-2474-10-8-1"/></fig></sec><sec><title>Implementation</title><p>Many reported methods used Fourier transformation to fasten the process in generating the radiographs from computed tomography data [<xref ref-type="bibr" rid="B15">15</xref>,<xref ref-type="bibr" rid="B16">16</xref>]. However, Fourier transformation may decrease the precision, which is the first priority in the measurement analysis on plain radiographs. On the other hand, ray tracing, which is popular in computer game, may be suitable for this transformation. Unfortunately, current built libraries only provide reflection images instead of transparent images that are needed in our analysis. Therefore we have to build up our whole software program before practical application in the plain radiographs.</p><p>Another problem is physics, i.e., once X-rays beam pass through the prosthesis, they then generate the image on the radiogram film. The grey scale on the radiogram film is determined by the amount of the X-ray passed that is dependent on the thickness of the metal in the pathway. Such condition follows Beer-Lambert law.</p><p><disp-formula id="bmcM1"><label>(1)</label>Penetration = e<sup>-<italic>kbc</italic></sup></disp-formula></p><p><italic>k</italic>: molar absorbability</p><p><italic>b</italic>: path length</p><p><italic>c</italic>: concentration</p><p>The parameter <italic>k </italic>is different among various metals and radiation energy (<italic>kv </italic>in X-ray). In real X-ray machine, the distribution of <italic>kv </italic>follows the rule of normal distribution, which is different among various X-ray machines. After calculating the amount of X-rays passed, we need another formula to transfer them to grey scale.</p><p>Because too many parameters needed to be controlled to build up the software program, we tried another solution. We first took X-ray (63 kv, 17 mas) on the step-wedge phantom, made of titanium, which has 5 steps with an increment of 1 mm thickness from 1 to 5 mm [Figure <xref ref-type="fig" rid="F2">2</xref>]. Such a step-wedge phantom film was scanned. The grey levels on this X-ray radiogram were mapped as the optical density values. We measured the optical density of each of the 5 wedges as well as that of the film background. The mapping function, from metal width to greyscale, is fit by exponential function. The mapping function is shown in Figure <xref ref-type="fig" rid="F2">2</xref>.</p><fig position="float" id="F2"><label>Figure 2</label><caption><p><bold>(A)The phantom, which is made of titanium with thickness from 1 mm to 5 mm</bold>. (B) The corresponding photodensity on the radiographs of the phantom is shown. (C)The mapping function (from thickness to grey scale). We fit the experiment points by an exponential function.</p></caption><graphic xlink:href="1471-2474-10-8-2"/></fig><p>Our goal is to build a simulated total hip prosthesis. Virtually, femoral head equals to a ball.</p><p><disp-formula id="bmcM2"><label>(2)</label><italic>x</italic><sup>2</sup>+<italic>y</italic><sup>2</sup>+<italic>z</italic><sup>2</sup>&#x0003c;<italic>r</italic><sub><italic>f</italic></sub><sup>2</sup></disp-formula></p><p>(<italic>x</italic>, <italic>y</italic>, <italic>z</italic>) is the point of the simulated three-dimensional Cartesian coordinate system. <italic>r</italic><sub><italic>f </italic></sub>is the radius of femoral head.</p><p>In our program, we make the ball move to simulate wearing of insert.</p><p><disp-formula id="bmcM3"><label>(3)</label>(<italic>x</italic>-<italic>d</italic><sub><italic>x</italic></sub>)<sup>2</sup>+(<italic>y</italic>-<italic>d</italic><sub><italic>y</italic></sub>)<sup>2</sup>+(<italic>z</italic>-<italic>d</italic><sub><italic>z</italic></sub>)<sup>2</sup>&#x0003c;<italic>r</italic><sub><italic>f</italic></sub><sup>2</sup></disp-formula></p><p><italic>d</italic><sub><italic>x</italic></sub>, <italic>d</italic><sub><italic>y</italic></sub>, <italic>d</italic><sub><italic>z </italic></sub>are femoral head movement in three directions.</p><p>Virtually, acetabulum is composed of two balls and one plane.</p><p><disp-formula id="bmcM4"><label>(4)</label><italic>x</italic><sup>2</sup>+<italic>y</italic><sup>2</sup>+<italic>z</italic><sup>2</sup>&#x0003c;<italic>r</italic><sub><italic>ao</italic></sub><sup>2</sup></disp-formula></p><p><disp-formula id="bmcM5"><label>(5)</label><italic>x</italic><sup>2</sup>+<italic>y</italic><sup>2</sup>+<italic>z</italic><sup>2</sup>&#x0003e;<italic>r</italic><sub><italic>io</italic></sub><sup>2</sup></disp-formula></p><p><disp-formula id="bmcM6"><label>(6)</label><italic>ax</italic>+<italic>by</italic>+<italic>cz</italic>&#x0003e;0</disp-formula></p><p><italic>r</italic><sub><italic>ao </italic></sub>means radius of acetabulum's outer shell, <italic>r</italic><sub><italic>io </italic></sub>means radius of acetabulum's inner shell, (<italic>a</italic>, <italic>b</italic>, <italic>c</italic>) means the normal vector of the acetabulum which can be derived from inclination and anteversion of acetabulum. Liaw et al. derived the following formula for this process.[<xref ref-type="bibr" rid="B17">17</xref>]</p><p><disp-formula id="bmcM6.1"><label>(6.1)</label>(<italic>a</italic>, <italic>b</italic>, <italic>c</italic>) = (sin<italic>&#x003c6; </italic>&#x000d7; cos<italic>&#x003b8;</italic>, -cos<italic>&#x003c6; </italic>&#x000d7; cos<italic>&#x003b8;</italic>, sin<italic>&#x003b8;</italic>)</disp-formula></p><p>Vector (<italic>a</italic>, <italic>b</italic>, <italic>c</italic>) means the normal vector of the acetabulum, <italic>&#x003c6; </italic>means the inclination of acetabulum, <italic>&#x003b8; </italic>means the anteversion of acetabulum, positive <italic>&#x003b8; </italic>means anteversion, and negative <italic>&#x003b8; </italic>means retroversion.</p><p>Theoretically, the X-ray source is set at (0,0,-<italic>d</italic><sub><italic>t</italic></sub>). <italic>d</italic><sub><italic>t </italic></sub>means tube distance (the X-ray tube to the acetabulum center). The points at film are (<italic>x</italic><sub><italic>f</italic></sub>, <italic>y</italic><sub><italic>f</italic></sub>, <italic>d</italic><sub><italic>f</italic></sub>). (<italic>x</italic><sub><italic>f</italic></sub>, <italic>y</italic><sub><italic>f</italic></sub>) means point at film. <italic>d</italic><sub><italic>f </italic></sub>means distance from film to the acetabulum center.</p><p><disp-formula id="bmcM7"><label>(7)</label>(<italic>x</italic>, <italic>y</italic>, <italic>z</italic>) = (<italic>t x</italic><sub><italic>f</italic></sub>, <italic>t y</italic><sub><italic>f</italic></sub>, <italic>t</italic>(<italic>d</italic><sub><italic>f</italic></sub>+<italic>d</italic><sub><italic>t</italic></sub>)-<italic>d</italic><sub><italic>t</italic></sub>)&#x000a0;&#x000a0;&#x000a0;0&#x0003c;<italic>t </italic>&#x0003c;1</disp-formula></p><p>The ray-tracing algorithm means calculating every ray from X-ray source to film. We used formula (7), simulating every X-ray from source to film. We then determined the total length the X-ray beam passed through femoral head by calculating the length between the two extreme solutions of formulas (3) and (7). Finally, we came out at the total length the X-ray beam passed through acetabulum by calculating length between the two extreme solutions of formulas (4), (5), (6), and (7). We use analytical mathematics for these calculations. The detailed process is illustrated in Appendix section.</p><p>In summary, we first built a mathematical model of acetabulum and femoral head, formulas (3) to (7). The real dimension data was adopted to generate the proper prosthesis figure. Then we calculated the total thickness of metal the X-ray beams passed by the ray-tracing algorithm, and then transformed these digital data to grey scale by mapping function. Finally, the gray scale generated for the prosthesis was shifted according to the aforementioned method. We could generate various radiographs according to the different parameters used.</p><p>The functional parameters in the <italic>THR Simulator </italic>include the following:</p><p>Thickness: refers to the thickness of the acetabulum shell.</p><p>Film size: refers to the X-ray film size it simulates.</p><p>Tube distance: refers to the distance from X-ray tube to the acetabulum center.</p><p>Film distance: refers to the distance from X-ray film to the acetabulum center.</p><p>Anteversion: refers to the version of the acetabular cup. The user can choose either version (anatomical, radiological, or operational) to simulate. Negative value means retroversion.</p><p>Abduction: refers to the abduction (or inclination) of the acetabular cup.</p><p>Upper movement: refers to the femoral head moving upward.</p><p>Medial movement: refers to the femoral head moving medially.</p><p>Posterior movement: refers to the femoral head moving posteriorly.</p><p>Picture size: refers to the size of picture file to simulate.</p></sec><sec><title>Results and discussion</title><p>Under Windows platform and using Borland C++ Builder programming tool, we developed the <italic>THR Simulator </italic>shown in Figure <xref ref-type="fig" rid="F1">1</xref>. In the <italic>THR Simulator</italic>, the user can incorporate many parameters before generating a simulated radiograph, i.e., with different parameters adopted, we can generate different radiographs. These can be used for further analysis.</p><p>As shown in Figures <xref ref-type="fig" rid="F1">1</xref> and <xref ref-type="fig" rid="F3">3</xref>, we can obtain different simulated radiographs according to the parameters used. Thus we can demonstrate the function of such software, <italic>Simulator</italic>, in the application of the parameters.</p><fig position="float" id="F3"><label>Figure 3</label><caption><p><bold>The real radiograph is on the left, and the simulated one is on the right</bold>. They show to be similar except some local features of the acetabulum and the bony noise.</p></caption><graphic xlink:href="1471-2474-10-8-3"/></fig><p>Previously reported methods for measurement of acetabular cup orientation include mechanical simulator used for verifying insert wearing measuring methods [<xref ref-type="bibr" rid="B7">7</xref>], as well as other methods adopting Fourier transformation algorithm [<xref ref-type="bibr" rid="B15">15</xref>,<xref ref-type="bibr" rid="B16">16</xref>]. These methods have their own disadvantages. The mechanical simulator can be used to generate radiographs directly but has some inherent problems. The simulation process takes much time, about 50 seconds with Pentium III 500 MHz notebook. On the other hand, other methods using Fourier transformation algorithm can do it in real time [<xref ref-type="bibr" rid="B15">15</xref>,<xref ref-type="bibr" rid="B16">16</xref>] at the expense of lower precision. Thus we abandoned Fourier transformation algorithm and developed our own precise algorithm.</p><p>Our <italic>THR Simulator </italic>indeed improved the disadvantages of the above methods. The <italic>THR Simulator </italic>can incorporate several parameters for analysis at the same time. In practice, we can obtain the basic parameters from the prosthesis venders, i.e. shell diameter, shell thickness to generate simulated radiographs. Table <xref ref-type="table" rid="T1">1</xref> shows the parameters of total hip prostheses (U2, United Orthopedic Corp, Hsinchu, Taiwan).</p><table-wrap position="float" id="T1"><label>Table 1</label><caption><p>Parameters of total hip prostheses (U2, United Orthopedic Corporation, Hsinchu, Taiwan).</p></caption><table frame="hsides" rules="groups"><thead><tr><td align="center">Acetabular shell diameter(mm)</td><td align="center">Acetabular insert thickness (mm)</td><td align="center">Femoral head diameter (mm)</td><td align="center">Acetabular shell thickness (mm)</td></tr></thead><tbody><tr><td align="center">44</td><td align="center">6.9</td><td align="center">28</td><td align="center">1.1</td></tr><tr><td align="center">46</td><td align="center">7.9</td><td align="center">28</td><td align="center">1.1</td></tr><tr><td align="center">48</td><td align="center">6.9</td><td align="center">28</td><td align="center">3.1</td></tr><tr><td align="center">50</td><td align="center">7.9</td><td align="center">28</td><td align="center">3.1</td></tr><tr><td align="center">52</td><td align="center">8.9</td><td align="center">28</td><td align="center">3.1</td></tr><tr><td align="center">54</td><td align="center">9.9</td><td align="center">28</td><td align="center">3.1</td></tr><tr><td align="center">56</td><td align="center">10.9</td><td align="center">28</td><td align="center">3.1</td></tr><tr><td align="center">58</td><td align="center">11.9</td><td align="center">28</td><td align="center">3.1</td></tr><tr><td align="center">60</td><td align="center">12.9</td><td align="center">28</td><td align="center">3.1</td></tr><tr><td align="center">62</td><td align="center">13.9</td><td align="center">28</td><td align="center">3.1</td></tr></tbody></table></table-wrap><p>To make simulated radiographs more real, users can superimpose the synthesized radiographs onto real radiographs. We do not routinely recommend doing so because this action may make users misread patient's position and thus confuse the standardization process[<xref ref-type="bibr" rid="B17">17</xref>].</p><p>The early edition of <italic>THR Simulator </italic>software has been used in two previous studies. One is to verify a new protractor in comparing with previous established mathematical method of measuring acetabulum[<xref ref-type="bibr" rid="B1">1</xref>]. We used the method in the earlier publication to simulate 45 radiographs of total hip arthroplasties with 15 different anteversions ranging from 15&#x000b0;&#x02013;29&#x000b0;, and then verified the two methods of measuring anteversion of acetabular cup [<xref ref-type="bibr" rid="B1">1</xref>]. The mean errors of both measuring methods are within two degrees. Figure <xref ref-type="fig" rid="F4">4</xref> shows how to measure the cup orientation with this invented method. The second study is to verify measuring insert wearing program. We use the earlier publication to simulate 64 radiographs with 2 different anteversion angles, 2 different abduction angles, 4 different superior wears, and 4 different medial wears. The errors are within 0.2 mm [<xref ref-type="bibr" rid="B18">18</xref>]. These results can also approve the precision of our <italic>THR Simulator</italic>. <italic>THR Simulator </italic>can provide researcher a new tool when developing their new device or new methods on measuring geometrical parameters of pelvis after total hip arthroplasty.</p><fig position="float" id="F4"><label>Figure 4</label><caption><p><bold>The simulated radiograph is printed in paper and is measured with the previously published method</bold>. We align the baseline of the protractor with the long axis of the ellipse, and then read the anteversion at the mid-point of the ellipse. Meanwhile we read the inclination at the horizontal line on the upper part of the protractor. In this case the anteversion is 9&#x000b0; and inclination is 45&#x000b0;.</p></caption><graphic xlink:href="1471-2474-10-8-4"/></fig><p>We use upper, medial, and posterior movements to indicate wearing of the three directions. Because femoral heads may not locate in the center of the acetabulum, the user should adjust these three vectors to fit every situation.</p><p>Our program can accommodate a three-dimensional wear vector by incorporating movements in the inferior-superior (upper), medial-lateral, and anterior-posterior directions. Inferior-superior and medial-lateral wears change the location of the femoral head relative to the cup while anterior-posterior wear changes the apparent size of the femoral head. However, the change in size is negligible.</p><p>Calculating wearing volume is another interesting issue. Kosak et al. has published a mathematical model to calculate it with the three wearing directions.[<xref ref-type="bibr" rid="B19">19</xref>]</p></sec><sec><title>Conclusion</title><p>We designed new software <italic>THR Simulator </italic>that can generate radiographs after total hip arthroplasty. The strength is its accuracy and precision. The limitation is that it can not synthesize the details of the prosthesis and surrounding bone. We hope it can be used in future studies about measurements of geometrical parameters of pelvis after total hip arthroplasty.</p></sec><sec><title>Availability and requirements</title><p>The software <italic>THR Simulator </italic>is attached [see Additional files <xref ref-type="supplementary-material" rid="S1">1</xref>, <xref ref-type="supplementary-material" rid="S2">2</xref>, <xref ref-type="supplementary-material" rid="S3">3</xref>]. It can be run in Microsoft Windows 98 and XP. The central processor and memory requirements are minimal. The three files should be located in the same directory in disc.</p></sec><sec><title>Competing interests</title><p>The authors declare that they have no competing interests.</p></sec><sec><title>Authors' contributions</title><p>TYW and RSY designed the study. TYW gathered the data. CKL, SMH and RSY analyzed the data. CSF wrote the initial drafts and CKL ensured the accuracy of the data and analysis.</p></sec><sec><title>Appendix</title><p>Mathematical detail of calculating metal thickness</p><p>Equation (7) shows the line from X-ray source to the film.</p><p>We first change Formula (3) to Equation (3e).</p><p><disp-formula id="bmcM3e"><label>(3e)</label>(<italic>x</italic>-<italic>d</italic><sub><italic>x</italic></sub>)<sup>2</sup>+(<italic>y</italic>-<italic>d</italic><sub><italic>y</italic></sub>)<sup>2</sup>+(<italic>z</italic>-<italic>d</italic><sub><italic>z</italic></sub>)<sup>2 </sup>= <italic>r</italic><sub><italic>f</italic></sub><sup>2</sup></disp-formula></p><p>Then we find the solution of <italic>t </italic>between Equations (7) and (3e). If there is no solution or only one solution, the thickness is zero, otherwise it means that the X-ray beam pass through it. From <italic>t </italic>we can calculate the real point using Formula (3), and then we can calculate the distance between the two points, which is the metal thickness the X-ray passed.</p><p>Similarly, we change Formula (4), (5), and (6) to Equations (4e), (5e), and (6e).</p><p><disp-formula id="bmcM4e"><label>(4e)</label><italic>x</italic><sup>2</sup>+<italic>y</italic><sup>2</sup>+<italic>z</italic><sup>2 </sup>= <italic>r</italic><sub><italic>ao</italic></sub><sup>2</sup></disp-formula></p><p><disp-formula id="bmcM5e"><label>(5e)</label><italic>x</italic><sup>2</sup>+<italic>y</italic><sup>2</sup>+<italic>z</italic><sup>2 </sup>= <italic>r</italic><sub><italic>io</italic></sub><sup>2</sup></disp-formula></p><p><disp-formula id="bmcM6e"><label>(6e)</label><italic>ax</italic>+<italic>by</italic>+<italic>cz </italic>= 0</disp-formula></p><p>Then we find the solution of <italic>t </italic>between Equations (7) and (4e). If there is no solution or only one solution, the thickness is zero, otherwise it means that the X-ray beam pass through it. We keep the solutions of <italic>t </italic>in the solution set. Similarly, we find the solution of <italic>t </italic>from Equations (7) and (5e). Then we keep the solutions of <italic>t </italic>in the solution set if there are solutions.</p><p>We solve t from Equation (7) and Formula (6) and get the range of <italic>t</italic>, i.e. <italic>t</italic>&#x0003e;<italic>rx </italic>or <italic>t</italic>&#x0003c;<italic>rx</italic>, and <italic>rx </italic>is the solution of <italic>t </italic>from Equations (7) and (6e).</p><p>We exclude the solutions in the solution set outside the range of <italic>t</italic>. If the number of solutions in the solution set is odd, we append <italic>rx </italic>into the set.</p><p>Now we sort the solutions in the set, and pair the solutions with their neighborhood. We apply these paired <italic>t </italic>solutions to Equation (7) and get pairs of points.</p><p>Finally we add the distance of these pair points to we previously calculated distance intra-head. The sum is the total thickness the X-ray beam passed through the metal.</p></sec><sec><title>Pre-publication history</title><p>The pre-publication history for this paper can be accessed here:</p><p><ext-link ext-link-type="uri" xlink:href="http://www.biomedcentral.com/1471-2474/10/8/prepub"/></p></sec><sec sec-type="supplementary-material"><title>Supplementary Material</title><supplementary-material content-type="local-data" id="S1"><caption><title>Additional File 1</title><p><bold>THR Simulator. </bold>The main program of our software.</p></caption><media xlink:href="1471-2474-10-8-S1.exe" mimetype="application" mime-subtype="x-msdownload"><caption><p>Click here for file</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="S2"><caption><title>Additional File 2</title><p><bold>Borland dynamic library #1</bold>. The dynamic library provided by Borland company.</p></caption><media xlink:href="1471-2474-10-8-S2.dll" mimetype="text" mime-subtype="plain"><caption><p>Click here for file</p></caption></media></supplementary-material><supplementary-material content-type="local-data" id="S3"><caption><title>Additional File 3</title><p><bold>Borland dynamic library #2.</bold> The dynamic library provided by Borland company.</p></caption><media xlink:href="1471-2474-10-8-S3.dll" mimetype="text" mime-subtype="plain"><caption><p>Click here for file</p></caption></media></supplementary-material></sec></body><back><ack><sec><title>Acknowledgements</title><p>We thank United Orthopedic Corporation, Hsinchu, Taiwan for providing us technical data of U2 total hip arthroplasty.</p><p>This study was supported by the grant of NSC96-2320-B-087-001, Taiwan, ROC.</p></sec></ack><ref-list><ref id="B1"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Liaw</surname><given-names>CK</given-names></name><etal></etal></person-group><article-title>A new tool for measuring cup orientation in total hip arthroplasties from plain radiographs</article-title><source>Clin Orthop Relat Res</source><year>2006</year><volume>451</volume><fpage>134</fpage><lpage>9</lpage><pub-id pub-id-type="pmid">16721351</pub-id><pub-id pub-id-type="doi">10.1097/01.blo.0000223988.41776.fa</pub-id></citation></ref><ref id="B2"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Fabeck</surname><given-names>L</given-names></name><etal></etal></person-group><article-title>A method to measure acetabular cup anteversion after total hip replacement</article-title><source>Acta Orthop Belg</source><year>1999</year><volume>65</volume><fpage>485</fpage><lpage>91</lpage><pub-id pub-id-type="pmid">10675944</pub-id></citation></ref><ref id="B3"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Ackland</surname><given-names>MK</given-names></name><name><surname>Bourne</surname><given-names>WB</given-names></name><name><surname>Uhthoff</surname><given-names>HK</given-names></name></person-group><article-title>Anteversion of the acetabular cup. Measurement of angle after total hip replacement</article-title><source>J Bone Joint Surg Br</source><year>1986</year><volume>68</volume><fpage>409</fpage><lpage>13</lpage><pub-id pub-id-type="pmid">3733807</pub-id></citation></ref><ref id="B4"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Pradhan</surname><given-names>R</given-names></name></person-group><article-title>Planar anteversion of the acetabular cup as determined from plain anteroposterior radiographs</article-title><source>J Bone Joint Surg Br</source><year>1999</year><volume>81</volume><fpage>431</fpage><lpage>5</lpage><pub-id pub-id-type="pmid">10872360</pub-id><pub-id pub-id-type="doi">10.1302/0301-620X.81B3.9067</pub-id></citation></ref><ref id="B5"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Visser</surname><given-names>JD</given-names></name><name><surname>Konings</surname><given-names>JG</given-names></name></person-group><article-title>A new method for measuring angles after total hip arthroplasty. A study of the acetabular cup and femoral component</article-title><source>J Bone Joint Surg Br</source><year>1981</year><volume>63B</volume><fpage>556</fpage><lpage>9</lpage><pub-id pub-id-type="pmid">7298684</pub-id></citation></ref><ref id="B6"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Widmer</surname><given-names>KH</given-names></name></person-group><article-title>A simplified method to determine acetabular cup anteversion from plain radiographs</article-title><source>J Arthroplasty</source><year>2004</year><volume>19</volume><fpage>387</fpage><lpage>90</lpage><pub-id pub-id-type="pmid">15067657</pub-id><pub-id pub-id-type="doi">10.1016/j.arth.2003.10.016</pub-id></citation></ref><ref id="B7"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Ebramzadeh</surname><given-names>E</given-names></name><etal></etal></person-group><article-title>Accuracy of measurement of polyethylene wear with use of radiographs of total hip replacements</article-title><source>J Bone Joint Surg Am</source><year>2003</year><volume>85-A</volume><fpage>2378</fpage><lpage>84</lpage><pub-id pub-id-type="pmid">14668508</pub-id></citation></ref><ref id="B8"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Livermore</surname><given-names>J</given-names></name><name><surname>Ilstrup</surname><given-names>D</given-names></name><name><surname>Morrey</surname><given-names>B</given-names></name></person-group><article-title>Effect of femoral head size on wear of the polyethylene acetabular component</article-title><source>J Bone Joint Surg Am</source><year>1990</year><volume>72</volume><fpage>518</fpage><lpage>28</lpage><pub-id pub-id-type="pmid">2324138</pub-id></citation></ref><ref id="B9"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Hardinge</surname><given-names>K</given-names></name><etal></etal></person-group><article-title>Measurement of hip prostheses using image analysis. The maxima hip technique</article-title><source>J Bone Joint Surg Br</source><year>1991</year><volume>73</volume><fpage>724</fpage><lpage>8</lpage><pub-id pub-id-type="pmid">1894658</pub-id></citation></ref><ref id="B10"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Shaver</surname><given-names>SM</given-names></name><etal></etal></person-group><article-title>Digital edge-detection measurement of polyethylene wear after total hip arthroplasty</article-title><source>J Bone Joint Surg Am</source><year>1997</year><volume>79</volume><fpage>690</fpage><lpage>700</lpage><pub-id pub-id-type="pmid">9160941</pub-id></citation></ref><ref id="B11"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Martell</surname><given-names>JM</given-names></name><name><surname>Berdia</surname><given-names>S</given-names></name></person-group><article-title>Determination of polyethylene wear in total hip replacements with use of digital radiographs</article-title><source>J Bone Joint Surg Am</source><year>1997</year><volume>79</volume><fpage>1635</fpage><lpage>41</lpage><pub-id pub-id-type="pmid">9384422</pub-id></citation></ref><ref id="B12"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Collier</surname><given-names>MB</given-names></name><etal></etal></person-group><article-title>Evaluation of contemporary software methods used to quantify polyethylene wear after total hip arthroplasty</article-title><source>J Bone Joint Surg Am</source><year>2003</year><volume>85-A</volume><fpage>2410</fpage><lpage>8</lpage><pub-id pub-id-type="pmid">14668512</pub-id></citation></ref><ref id="B13"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Devane</surname><given-names>PA</given-names></name><etal></etal></person-group><article-title>Measurement of polyethylene wear in metal-backed acetabular cups. I. Three-dimensional technique</article-title><source>Clin Orthop Relat Res</source><year>1995</year><fpage>303</fpage><lpage>16</lpage><pub-id pub-id-type="pmid">7554644</pub-id></citation></ref><ref id="B14"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Geerdink</surname><given-names>CH</given-names></name><etal></etal></person-group><article-title>The determination of linear and angular penetration of the femoral head into the acetabular component as an assessment of wear in total hip replacement: A COMPARISON OF FOUR COMPUTER-ASSISTED METHODS</article-title><source>J Bone Joint Surg Br</source><year>2008</year><volume>90</volume><fpage>839</fpage><lpage>46</lpage><pub-id pub-id-type="pmid">18591589</pub-id><pub-id pub-id-type="doi">10.1302/0301-620X.90B7.20305</pub-id></citation></ref><ref id="B15"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Calhoun</surname><given-names>PS</given-names></name><etal></etal></person-group><article-title>Three-dimensional volume rendering of spiral CT data: theory and method</article-title><source>Radiographics</source><year>1999</year><volume>19</volume><fpage>745</fpage><lpage>64</lpage><pub-id pub-id-type="pmid">10336201</pub-id></citation></ref><ref id="B16"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Muniyandi</surname><given-names>M</given-names></name><etal></etal></person-group><article-title>Real-time PC based X-ray simulation for interventional radiology training</article-title><source>Stud Health Technol Inform</source><year>2003</year><volume>94</volume><fpage>233</fpage><lpage>9</lpage><pub-id pub-id-type="pmid">15455899</pub-id></citation></ref><ref id="B17"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Liaw</surname><given-names>CK</given-names></name><etal></etal></person-group><article-title>A simple mathematical standardized measurement of acetabulum anteversion after total hip arthroplasty</article-title><source>Computational and Mathematical Methods in Medicine</source><year>2008</year><volume>9</volume><fpage>105</fpage><lpage>119</lpage><pub-id pub-id-type="doi">10.1080/17486700701865265</pub-id></citation></ref><ref id="B18"><citation citation-type="other"><person-group person-group-type="author"><name><surname>Liaw</surname><given-names>CK</given-names></name><etal></etal></person-group><article-title>Automatic digital PE wear measurement</article-title><source>AAOS annual meeting Washington</source><year>2005</year></citation></ref><ref id="B19"><citation citation-type="journal"><person-group person-group-type="author"><name><surname>Kosak</surname><given-names>R</given-names></name><etal></etal></person-group><article-title>Polyethylene wear in total hip prostheses: the influence of direction of linear wear on volumetric wear determined from radiographic data</article-title><source>Skeletal Radiol</source><year>2003</year><volume>32</volume><fpage>679</fpage><lpage>86</lpage><pub-id pub-id-type="pmid">13680199</pub-id><pub-id pub-id-type="doi">10.1007/s00256-003-0685-2</pub-id></citation></ref></ref-list></back></article>